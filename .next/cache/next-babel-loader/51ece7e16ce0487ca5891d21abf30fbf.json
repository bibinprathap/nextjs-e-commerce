{"ast":null,"code":"var __jsx = React.createElement;\n// react\nimport React, { useEffect, useState } from 'react'; // third-party\n\nimport { FormattedMessage, useIntl } from 'react-intl'; // application\n\nimport AccountLayout from '~/components/account/AccountLayout';\nimport AddressCard from '~/components/shared/AddressCard';\nimport AppLink from '~/components/shared/AppLink';\nimport AsyncAction from '~/components/shared/AsyncAction';\nimport PageTitle from '~/components/shared/PageTitle';\nimport url from '~/services/url';\nimport { accountApi } from '~/api';\n\nfunction Page() {\n  const intl = useIntl();\n  const {\n    0: addresses,\n    1: setAddresses\n  } = useState([]);\n\n  const delAddress = async addressId => {\n    await accountApi.delAddress(addressId);\n    await accountApi.getAddresses().then(setAddresses);\n  };\n\n  useEffect(() => {\n    let canceled = false;\n    accountApi.getAddresses().then(result => {\n      if (canceled) {\n        return;\n      }\n\n      setAddresses(result);\n    });\n    return () => {\n      canceled = true;\n    };\n  }, []);\n  return __jsx(\"div\", {\n    className: \"addresses-list\"\n  }, __jsx(PageTitle, null, intl.formatMessage({\n    id: 'HEADER_ADDRESSES'\n  })), __jsx(AppLink, {\n    href: url.accountAddressNew(),\n    className: \"addresses-list__item addresses-list__item--new\"\n  }, __jsx(\"div\", {\n    className: \"addresses-list__plus\"\n  }), __jsx(\"div\", {\n    className: \"btn btn-secondary btn-sm\"\n  }, __jsx(FormattedMessage, {\n    id: \"BUTTON_ADD_NEW\"\n  }))), __jsx(\"div\", {\n    className: \"addresses-list__divider\"\n  }), addresses.map((address, index) => __jsx(React.Fragment, {\n    key: index\n  }, __jsx(AsyncAction, {\n    action: () => delAddress(address.id),\n    render: ({\n      run,\n      loading\n    }) => __jsx(AddressCard, {\n      className: \"addresses-list__item\",\n      address: address,\n      label: address.default ? __jsx(FormattedMessage, {\n        id: \"TEXT_DEFAULT_ADDRESS\"\n      }) : '',\n      loading: loading,\n      footer: __jsx(React.Fragment, null, __jsx(AppLink, {\n        href: url.accountAddressEdit(address)\n      }, __jsx(FormattedMessage, {\n        id: \"LINK_EDIT_ADDRESS\"\n      })), \"\\xA0\\xA0\", __jsx(AppLink, {\n        anchor: true,\n        onClick: event => {\n          event.preventDefault();\n          run();\n        }\n      }, __jsx(FormattedMessage, {\n        id: \"LINK_REMOVE\"\n      })))\n    })\n  }), __jsx(\"div\", {\n    className: \"addresses-list__divider\"\n  }))));\n}\n\nPage.Layout = AccountLayout;\nexport default Page;","map":null,"metadata":{},"sourceType":"module"}