{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n// react\nimport React, { useMemo, useRef } from 'react'; // third-party\n\nimport classNames from 'classnames';\n// application\nimport AppSlick from '~/components/shared/AppSlick';\nimport ProductCard from '~/components/shared/ProductCard';\nimport SectionHeader from '~/components/shared/SectionHeader';\nconst productCardLayoutMap = {\n  'grid-4': 'grid',\n  'grid-4-sidebar': 'grid',\n  'grid-5': 'grid',\n  'grid-6': 'grid',\n  horizontal: 'horizontal',\n  'horizontal-sidebar': 'horizontal'\n};\nconst productCardExcludeMap = {\n  grid: ['features', 'list-buttons'],\n  list: [],\n  horizontal: ['actions', 'status-badge', 'features', 'buttons', 'meta'],\n  table: []\n};\nconst slickSettings = {\n  'grid-4': {\n    dots: false,\n    arrows: false,\n    infinite: true,\n    speed: 400,\n    slidesToShow: 4,\n    slidesToScroll: 4,\n    responsive: [{\n      breakpoint: 991,\n      settings: {\n        slidesToShow: 3,\n        slidesToScroll: 3\n      }\n    }, {\n      breakpoint: 767,\n      settings: {\n        slidesToShow: 2,\n        slidesToScroll: 2\n      }\n    }, {\n      breakpoint: 459,\n      settings: {\n        slidesToShow: 1,\n        slidesToScroll: 1\n      }\n    }]\n  },\n  'grid-4-sidebar': {\n    dots: false,\n    arrows: false,\n    infinite: true,\n    speed: 400,\n    slidesToShow: 4,\n    slidesToScroll: 4,\n    responsive: [{\n      breakpoint: 1399,\n      settings: {\n        slidesToShow: 3,\n        slidesToScroll: 3\n      }\n    }, {\n      breakpoint: 767,\n      settings: {\n        slidesToShow: 2,\n        slidesToScroll: 2\n      }\n    }, {\n      breakpoint: 459,\n      settings: {\n        slidesToShow: 1,\n        slidesToScroll: 1\n      }\n    }]\n  },\n  'grid-5': {\n    dots: false,\n    arrows: false,\n    infinite: true,\n    speed: 400,\n    slidesToShow: 5,\n    slidesToScroll: 5,\n    responsive: [{\n      breakpoint: 1399,\n      settings: {\n        slidesToShow: 4,\n        slidesToScroll: 4\n      }\n    }, {\n      breakpoint: 991,\n      settings: {\n        slidesToShow: 3,\n        slidesToScroll: 3\n      }\n    }, {\n      breakpoint: 767,\n      settings: {\n        slidesToShow: 2,\n        slidesToScroll: 2\n      }\n    }, {\n      breakpoint: 459,\n      settings: {\n        slidesToShow: 1,\n        slidesToScroll: 1\n      }\n    }]\n  },\n  'grid-6': {\n    dots: false,\n    arrows: false,\n    infinite: true,\n    speed: 400,\n    slidesToShow: 6,\n    slidesToScroll: 6,\n    responsive: [{\n      breakpoint: 1399,\n      settings: {\n        slidesToShow: 4,\n        slidesToScroll: 4\n      }\n    }, {\n      breakpoint: 991,\n      settings: {\n        slidesToShow: 3,\n        slidesToScroll: 3\n      }\n    }, {\n      breakpoint: 767,\n      settings: {\n        slidesToShow: 2,\n        slidesToScroll: 2\n      }\n    }, {\n      breakpoint: 459,\n      settings: {\n        slidesToShow: 1,\n        slidesToScroll: 1\n      }\n    }]\n  },\n  horizontal: {\n    dots: false,\n    arrows: false,\n    infinite: true,\n    speed: 400,\n    slidesToShow: 4,\n    slidesToScroll: 4,\n    responsive: [{\n      breakpoint: 1399,\n      settings: {\n        slidesToShow: 3,\n        slidesToScroll: 3\n      }\n    }, {\n      breakpoint: 991,\n      settings: {\n        slidesToShow: 2,\n        slidesToScroll: 2\n      }\n    }, {\n      breakpoint: 767,\n      settings: {\n        slidesToShow: 1,\n        slidesToScroll: 1\n      }\n    }]\n  },\n  'horizontal-sidebar': {\n    dots: false,\n    arrows: false,\n    infinite: true,\n    speed: 400,\n    slidesToShow: 3,\n    slidesToScroll: 3,\n    responsive: [{\n      breakpoint: 1399,\n      settings: {\n        slidesToShow: 2,\n        slidesToScroll: 2\n      }\n    }, {\n      breakpoint: 767,\n      settings: {\n        slidesToShow: 1,\n        slidesToScroll: 1\n      }\n    }]\n  }\n};\n\nfunction BlockProductsCarousel(props) {\n  const {\n    blockTitle,\n    products,\n    layout,\n    groups,\n    currentGroup,\n    links,\n    rows = 1,\n    loading = false,\n    onChangeGroup\n  } = props;\n  const slickRef = useRef(null);\n\n  const handleNextClick = () => {\n    if (slickRef.current) {\n      slickRef.current.slickNext();\n    }\n  };\n\n  const handlePrevClick = () => {\n    if (slickRef.current) {\n      slickRef.current.slickPrev();\n    }\n  };\n\n  const columns = useMemo(() => {\n    const result = [];\n\n    if (rows > 0) {\n      const productsQueue = products.slice();\n\n      while (productsQueue.length > 0) {\n        result.push(productsQueue.splice(0, rows));\n      }\n    }\n\n    return result;\n  }, [rows, products]);\n  const carousel = useMemo(() => {\n    const productCardLayout = productCardLayoutMap[layout];\n    const productCardExclude = productCardExcludeMap[productCardLayout];\n    return __jsx(AppSlick, _extends({\n      ref: slickRef\n    }, slickSettings[layout]), columns.map((column, columnIdx) => __jsx(\"div\", {\n      key: columnIdx,\n      className: \"block-products-carousel__column\"\n    }, column.map((product, productIdx) => __jsx(ProductCard, {\n      key: productIdx,\n      className: \"block-products-carousel__cell\",\n      product: product,\n      layout: productCardLayout,\n      exclude: productCardExclude\n    })))));\n  }, [columns, layout]);\n  return __jsx(\"div\", {\n    className: \"block block-products-carousel\",\n    \"data-layout\": layout\n  }, __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(SectionHeader, {\n    sectionTitle: blockTitle,\n    arrows: true,\n    groups: groups,\n    currentGroup: currentGroup,\n    links: links,\n    onNext: handleNextClick,\n    onPrev: handlePrevClick,\n    onChangeGroup: onChangeGroup\n  }), __jsx(\"div\", {\n    className: classNames('block-products-carousel__carousel', {\n      'block-products-carousel__carousel--loading': loading,\n      'block-products-carousel__carousel--has-items': columns.length > 0\n    })\n  }, __jsx(\"div\", {\n    className: \"block-products-carousel__carousel-loader\"\n  }), carousel)));\n}\n\nexport default React.memo(BlockProductsCarousel);","map":null,"metadata":{},"sourceType":"module"}