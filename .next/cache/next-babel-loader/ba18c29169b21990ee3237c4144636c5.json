{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n// react\nimport React, { useCallback, useRef, useState } from 'react'; // third-party\n\nimport classNames from 'classnames'; // application\n\nimport AppLink from '~/components/shared/AppLink';\nimport Megamenu from '~/components/header/Megamenu';\nimport { ArrowRoundedDown9x6Svg, ArrowRoundedRight7x11Svg, Menu16x12Svg } from '~/svg';\nimport { useGlobalMousedown } from '~/services/hooks'; // data\n\nimport dataHeaderDepartments from '~/data/headerDepartments';\n\nfunction Departments(props) {\n  const {\n    label\n  } = props;\n  const {\n    0: isOpen,\n    1: setIsOpen\n  } = useState(false);\n  const {\n    0: currentItem,\n    1: setCurrentItem\n  } = useState(null);\n  const rootRef = useRef(null);\n\n  const handleButtonClick = () => {\n    setIsOpen(state => !state);\n  };\n\n  const handleBodyMouseLeave = () => {\n    setCurrentItem(null);\n  };\n\n  const handleListPaddingMouseEnter = () => {\n    setCurrentItem(null);\n  };\n\n  const handleItemMouseEnter = item => {\n    setCurrentItem(item);\n  };\n\n  const handleItemClick = useCallback(() => {\n    setIsOpen(false);\n    setCurrentItem(null);\n  }, [setIsOpen, setCurrentItem]);\n  useGlobalMousedown(event => {\n    if (rootRef.current && !rootRef.current.contains(event.target)) {\n      setIsOpen(false);\n    }\n  }, [setIsOpen, rootRef]);\n  const classes = classNames('departments', {\n    'departments--open': isOpen\n  });\n  return __jsx(\"div\", {\n    className: classes,\n    ref: rootRef\n  }, __jsx(\"button\", {\n    className: \"departments__button\",\n    type: \"button\",\n    onClick: handleButtonClick\n  }, __jsx(\"span\", {\n    className: \"departments__button-icon\"\n  }, __jsx(Menu16x12Svg, null)), __jsx(\"span\", {\n    className: \"departments__button-title\"\n  }, label), __jsx(\"span\", {\n    className: \"departments__button-arrow\"\n  }, __jsx(ArrowRoundedDown9x6Svg, null))), __jsx(\"div\", {\n    className: \"departments__menu\"\n  }, __jsx(\"div\", {\n    className: \"departments__arrow\"\n  }), __jsx(\"div\", {\n    className: \"departments__body\",\n    onMouseLeave: handleBodyMouseLeave\n  }, __jsx(\"ul\", {\n    className: \"departments__list\"\n  }, __jsx(\"li\", {\n    className: \"departments__list-padding\",\n    role: \"presentation\",\n    onMouseEnter: handleListPaddingMouseEnter\n  }), dataHeaderDepartments.map((item, index) => {\n    var _item$submenu, _item$customFields;\n\n    const itemHasSubmenu = !!item.submenu;\n    const itemClasses = classNames('departments__item', {\n      'departments__item--has-submenu': itemHasSubmenu,\n      'departments__item--submenu--megamenu': ((_item$submenu = item.submenu) === null || _item$submenu === void 0 ? void 0 : _item$submenu.type) === 'megamenu',\n      'departments__item--hover': item === currentItem\n    });\n    return __jsx(\"li\", {\n      className: itemClasses,\n      key: index,\n      onMouseEnter: () => handleItemMouseEnter(item)\n    }, __jsx(AppLink, _extends({\n      className: \"departments__item-link\",\n      href: item.url,\n      onClick: () => handleItemClick()\n    }, (_item$customFields = item.customFields) === null || _item$customFields === void 0 ? void 0 : _item$customFields.anchorProps), item.title, itemHasSubmenu && __jsx(\"span\", {\n      className: \"departments__item-arrow\"\n    }, __jsx(ArrowRoundedRight7x11Svg, null))));\n  }), __jsx(\"li\", {\n    className: \"departments__list-padding\",\n    role: \"presentation\",\n    onMouseEnter: handleListPaddingMouseEnter\n  })), __jsx(\"div\", {\n    className: \"departments__menu-container\"\n  }, dataHeaderDepartments.map((item, index) => {\n    if (!item.submenu) {\n      return null;\n    }\n\n    const itemClasses = classNames('departments__megamenu', `departments__megamenu--size--${item.submenu.size}`, {\n      'departments__megamenu--open': item === currentItem\n    });\n    return __jsx(Megamenu, {\n      className: itemClasses,\n      menu: item.submenu,\n      key: index,\n      onItemClick: handleItemClick\n    });\n  })))));\n}\n\nexport default React.memo(Departments);","map":null,"metadata":{},"sourceType":"module"}