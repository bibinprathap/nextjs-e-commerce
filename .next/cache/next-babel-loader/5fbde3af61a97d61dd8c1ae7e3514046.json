{"ast":null,"code":"var __jsx = React.createElement;\n// react\nimport React, { useEffect, useState } from 'react'; // third-party\n\nimport { FormattedMessage, useIntl } from 'react-intl'; // application\n\nimport AccountLayout from '~/components/account/AccountLayout';\nimport AddressCard from '~/components/shared/AddressCard';\nimport AppImage from '~/components/shared/AppImage';\nimport AppLink from '~/components/shared/AppLink';\nimport CurrencyFormat from '~/components/shared/CurrencyFormat';\nimport PageTitle from '~/components/shared/PageTitle';\nimport url from '~/services/url';\nimport { accountApi } from '~/api';\nimport { useUser } from '~/store/user/userHooks';\n\nfunction Page() {\n  var intl = useIntl();\n  var user = useUser();\n\n  var _useState = useState(null),\n      address = _useState[0],\n      setAddress = _useState[1];\n\n  var _useState2 = useState([]),\n      orders = _useState2[0],\n      setOrders = _useState2[1];\n\n  useEffect(function () {\n    if (user) {\n      accountApi.getDefaultAddress().then(setAddress);\n      accountApi.getOrdersList({\n        limit: 3\n      }).then(function (list) {\n        setOrders(list.items);\n      });\n    } else {\n      setAddress(null);\n      setOrders([]);\n    }\n  }, [user]);\n\n  if (!user) {\n    return null;\n  }\n\n  return __jsx(\"div\", {\n    className: \"dashboard\"\n  }, __jsx(PageTitle, null, intl.formatMessage({\n    id: 'HEADER_DASHBOARD'\n  })), __jsx(\"div\", {\n    className: \"dashboard__profile card profile-card\"\n  }, __jsx(\"div\", {\n    className: \"card-body profile-card__body\"\n  }, __jsx(\"div\", {\n    className: \"profile-card__avatar\"\n  }, __jsx(AppImage, {\n    src: user.avatar\n  })), __jsx(\"div\", {\n    className: \"profile-card__name\"\n  }, \"\".concat(user.firstName, \" \").concat(user.lastName)), __jsx(\"div\", {\n    className: \"profile-card__email\"\n  }, user.email), __jsx(\"div\", {\n    className: \"profile-card__edit\"\n  }, __jsx(AppLink, {\n    href: url.accountProfile(),\n    className: \"btn btn-secondary btn-sm\"\n  }, __jsx(FormattedMessage, {\n    id: \"BUTTON_EDIT_PROFILE\"\n  }))))), !address && __jsx(\"div\", {\n    className: \"dashboard__address card\"\n  }, __jsx(\"div\", {\n    className: \"card-body d-flex justify-content-center align-items-center\"\n  }, __jsx(\"div\", {\n    className: \"text-center w-75\"\n  }, __jsx(\"p\", null, __jsx(FormattedMessage, {\n    id: \"TEXT_CALL_ADD_ADDRESS\"\n  })), __jsx(AppLink, {\n    href: url.accountAddressNew(),\n    className: \"btn btn-secondary btn-sm\"\n  }, __jsx(FormattedMessage, {\n    id: \"BUTTON_ADD_ADDRESS\"\n  }))))), address && __jsx(AddressCard, {\n    className: \"dashboard__address\",\n    address: address,\n    label: __jsx(FormattedMessage, {\n      id: \"TEXT_DEFAULT_ADDRESS\"\n    }),\n    featured: true,\n    footer: __jsx(AppLink, {\n      href: url.accountAddressEdit(address)\n    }, __jsx(FormattedMessage, {\n      id: \"LINK_EDIT_ADDRESS\"\n    }))\n  }), orders.length > 0 && __jsx(\"div\", {\n    className: \"dashboard__orders card\"\n  }, __jsx(\"div\", {\n    className: \"card-header\"\n  }, __jsx(\"h5\", null, __jsx(FormattedMessage, {\n    id: \"HEADER_RECENT_ORDERS\"\n  }))), __jsx(\"div\", {\n    className: \"card-divider\"\n  }), __jsx(\"div\", {\n    className: \"card-table\"\n  }, __jsx(\"div\", {\n    className: \"table-responsive-sm\"\n  }, __jsx(\"table\", null, __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", null, __jsx(FormattedMessage, {\n    id: \"TABLE_NUMBER\"\n  })), __jsx(\"th\", null, __jsx(FormattedMessage, {\n    id: \"TABLE_DATE\"\n  })), __jsx(\"th\", null, __jsx(FormattedMessage, {\n    id: \"TABLE_STATUS\"\n  })), __jsx(\"th\", null, __jsx(FormattedMessage, {\n    id: \"TABLE_TOTAL\"\n  })))), __jsx(\"tbody\", null, orders.map(function (order) {\n    return __jsx(\"tr\", {\n      key: order.id\n    }, __jsx(\"td\", null, __jsx(AppLink, {\n      href: url.accountOrderView(order)\n    }, __jsx(FormattedMessage, {\n      id: \"FORMAT_ORDER_NUMBER\",\n      values: {\n        number: order.number\n      }\n    }))), __jsx(\"td\", null, __jsx(FormattedMessage, {\n      id: \"FORMAT_DATE_MEDIUM\",\n      values: {\n        date: Date.parse(order.createdAt)\n      }\n    })), __jsx(\"td\", null, __jsx(FormattedMessage, {\n      id: \"TEXT_ORDER_STATUS_\".concat(order.status)\n    })), __jsx(\"td\", null, __jsx(FormattedMessage, {\n      id: \"TEXT_ORDER_TOTAL\",\n      values: {\n        total: __jsx(CurrencyFormat, {\n          value: order.total\n        }),\n        quantity: order.quantity\n      }\n    })));\n  })))))));\n}\n\nPage.Layout = AccountLayout;\nexport default Page;","map":null,"metadata":{},"sourceType":"module"}