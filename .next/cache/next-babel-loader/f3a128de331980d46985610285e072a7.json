{"ast":null,"code":"var __jsx = React.createElement;\n// react\nimport React, { useEffect, useState } from 'react'; // third-party\n\nimport classNames from 'classnames';\nimport { Controller, FormProvider } from 'react-hook-form';\nimport { FormattedMessage, useIntl } from 'react-intl'; // application\n\nimport AppLink from '~/components/shared/AppLink';\nimport AsyncAction from '~/components/shared/AsyncAction';\nimport BlockHeader from '~/components/blocks/BlockHeader';\nimport BlockProductsCarousel from '~/components/blocks/BlockProductsCarousel';\nimport BlockSpace from '~/components/blocks/BlockSpace';\nimport CompatibilityStatusBadge from '~/components/shared/CompatibilityStatusBadge';\nimport CurrencyFormat from '~/components/shared/CurrencyFormat';\nimport InputNumber from '~/components/shared/InputNumber';\nimport PageTitle from '~/components/shared/PageTitle';\nimport ProductForm from '~/components/shop/ProductForm';\nimport ProductGallery from '~/components/shop/ProductGallery';\nimport ProductSidebar from '~/components/shop/ProductSidebar';\nimport ProductTabs from '~/components/shop/ProductTabs';\nimport Rating from '~/components/shared/Rating';\nimport ShareLinks from '~/components/shared/ShareLinks';\nimport StockStatusBadge from '~/components/shared/StockStatusBadge';\nimport url from '~/services/url';\nimport { getCategoryPath } from '~/services/utils';\nimport { shopApi } from '~/api';\nimport { useCompareAddItem } from '~/store/compare/compareHooks';\nimport { useProductForm } from '~/services/forms/product';\nimport { useWishlistAddItem } from '~/store/wishlist/wishlistHooks';\nimport { useEnquiryOpen } from '~/store/enquiry/enquiryHooks';\nimport SendEnquiry from '~/components/shared/SendEnquiry';\nimport { Compare16Svg, Fi24Hours48Svg, FiFreeDelivery48Svg, FiPaymentSecurity48Svg, FiTag48Svg, Wishlist16Svg } from '~/svg';\n\nfunction ShopPageProduct(props) {\n  const {\n    product,\n    layout,\n    sidebarPosition = 'start'\n  } = props;\n  const intl = useIntl();\n  const wishlistAddItem = useWishlistAddItem();\n  const compareAddItem = useCompareAddItem();\n  const enquiryOpen = useEnquiryOpen();\n\n  const showEnquiry = () => enquiryOpen(product);\n\n  const galleryLayout = `product-${layout}`;\n  const {\n    0: relatedProducts,\n    1: setRelatedProducts\n  } = useState([]);\n  const productForm = useProductForm(product);\n  useEffect(() => {\n    let canceled = false;\n    shopApi.getRelatedProducts(product.id, 8).then(result => {\n      if (canceled) {\n        return;\n      }\n\n      setRelatedProducts(result);\n    });\n    return () => {\n      canceled = true;\n    };\n  }, [product]);\n\n  if (!product) {\n    return null;\n  }\n\n  const breadcrumb = [{\n    title: intl.formatMessage({\n      id: 'LINK_HOME'\n    }),\n    url: url.home()\n  }, {\n    title: intl.formatMessage({\n      id: 'LINK_SHOP'\n    }),\n    url: url.shop()\n  }, ...getCategoryPath(product.categories && product.categories[0]).map(x => ({\n    title: x.name,\n    url: url.category(x)\n  })), {\n    title: product.name,\n    url: url.product(product)\n  }];\n  const featuredAttributes = product.attributes.filter(x => x.featured);\n\n  const shopFeatures = __jsx(\"div\", {\n    className: \"product__shop-features shop-features\"\n  }, __jsx(\"ul\", {\n    className: \"shop-features__list\"\n  }, __jsx(\"li\", {\n    className: \"shop-features__item\"\n  }, __jsx(\"div\", {\n    className: \"shop-features__item-icon\"\n  }, __jsx(FiFreeDelivery48Svg, null)), __jsx(\"div\", {\n    className: \"shop-features__info\"\n  }, __jsx(\"div\", {\n    className: \"shop-features__item-title\"\n  }, __jsx(FormattedMessage, {\n    id: \"TEXT_SHOP_FEATURE_FREE_SHIPPING_TITLE\"\n  })), __jsx(\"div\", {\n    className: \"shop-features__item-subtitle\"\n  }, __jsx(FormattedMessage, {\n    id: \"TEXT_SHOP_FEATURE_FREE_SHIPPING_SUBTITLE\"\n  })))), __jsx(\"li\", {\n    className: \"shop-features__divider\",\n    role: \"presentation\"\n  }), __jsx(\"li\", {\n    className: \"shop-features__item\"\n  }, __jsx(\"div\", {\n    className: \"shop-features__item-icon\"\n  }, __jsx(Fi24Hours48Svg, null)), __jsx(\"div\", {\n    className: \"shop-features__info\"\n  }, __jsx(\"div\", {\n    className: \"shop-features__item-title\"\n  }, __jsx(FormattedMessage, {\n    id: \"TEXT_SHOP_FEATURE_SUPPORT_TITLE\"\n  })), __jsx(\"div\", {\n    className: \"shop-features__item-subtitle\"\n  }, __jsx(FormattedMessage, {\n    id: \"TEXT_SHOP_FEATURE_SUPPORT_SUBTITLE\"\n  })))), __jsx(\"li\", {\n    className: \"shop-features__divider\",\n    role: \"presentation\"\n  }), __jsx(\"li\", {\n    className: \"shop-features__item\"\n  }, __jsx(\"div\", {\n    className: \"shop-features__item-icon\"\n  }, __jsx(FiPaymentSecurity48Svg, null)), __jsx(\"div\", {\n    className: \"shop-features__info\"\n  }, __jsx(\"div\", {\n    className: \"shop-features__item-title\"\n  }, __jsx(FormattedMessage, {\n    id: \"TEXT_SHOP_FEATURE_SECURITY_TITLE\"\n  })), __jsx(\"div\", {\n    className: \"shop-features__item-subtitle\"\n  }, __jsx(FormattedMessage, {\n    id: \"TEXT_SHOP_FEATURE_SECURITY_SUBTITLE\"\n  })))), __jsx(\"li\", {\n    className: \"shop-features__divider\",\n    role: \"presentation\"\n  }), __jsx(\"li\", {\n    className: \"shop-features__item\"\n  }, __jsx(\"div\", {\n    className: \"shop-features__item-icon\"\n  }, __jsx(FiTag48Svg, null)), __jsx(\"div\", {\n    className: \"shop-features__info\"\n  }, __jsx(\"div\", {\n    className: \"shop-features__item-title\"\n  }, __jsx(FormattedMessage, {\n    id: \"TEXT_SHOP_FEATURE_HOT_OFFERS_TITLE\"\n  })), __jsx(\"div\", {\n    className: \"shop-features__item-subtitle\"\n  }, __jsx(FormattedMessage, {\n    id: \"TEXT_SHOP_FEATURE_HOT_OFFERS_SUBTITLE\"\n  })))), __jsx(\"li\", {\n    className: \"shop-features__divider\",\n    role: \"presentation\"\n  })));\n\n  const productInfoBody = __jsx(\"div\", {\n    className: \"product__info-body\"\n  }, product.compareAtPrice && __jsx(\"div\", {\n    className: \"product__badge tag-badge tag-badge--sale\"\n  }, __jsx(FormattedMessage, {\n    id: \"TEXT_BADGE_SALE\"\n  })), __jsx(\"div\", {\n    className: \"product__prices-stock\"\n  }, __jsx(\"div\", {\n    className: \"product__prices\"\n  }, product.compareAtPrice && __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"product__price product__price--old\"\n  }, __jsx(CurrencyFormat, {\n    value: product.compareAtPrice\n  })), __jsx(\"div\", {\n    className: \"product__price product__price--new\"\n  }, __jsx(CurrencyFormat, {\n    value: product.price\n  }))), !product.compareAtPrice && __jsx(\"div\", {\n    className: \"product__price product__price--current\"\n  }, __jsx(CurrencyFormat, {\n    value: product.price\n  }))), __jsx(StockStatusBadge, {\n    className: \"product__stock\",\n    stock: product.stock\n  })), __jsx(\"div\", {\n    className: \"product__meta\"\n  }, __jsx(\"table\", null, __jsx(\"tbody\", null, __jsx(\"tr\", null, __jsx(\"th\", null, __jsx(FormattedMessage, {\n    id: \"TABLE_SKU\"\n  })), __jsx(\"td\", null, product.sku)), product.brand && __jsx(React.Fragment, null, __jsx(\"tr\", null, __jsx(\"th\", null, __jsx(FormattedMessage, {\n    id: \"TABLE_BRAND\"\n  })), __jsx(\"td\", null, __jsx(AppLink, {\n    href: url.brand(product.brand)\n  }, product.brand.name))), __jsx(\"tr\", null, __jsx(\"th\", null, __jsx(FormattedMessage, {\n    id: \"TABLE_COUNTRY\"\n  })), __jsx(\"td\", null, __jsx(FormattedMessage, {\n    id: `COUNTRY_NAME_${product.brand.country}`\n  })))), __jsx(\"tr\", null, __jsx(\"th\", null, __jsx(FormattedMessage, {\n    id: \"TABLE_PART_NUMBER\"\n  })), __jsx(\"td\", null, product.partNumber))))));\n\n  const productActions = __jsx(\"div\", {\n    className: \"product__actions\"\n  }, product.stock !== 'out-of-stock' && __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"product__actions-item product__actions-item--quantity\"\n  }, __jsx(Controller, {\n    name: \"quantity\",\n    rules: {\n      required: true\n    },\n    render: ({\n      value,\n      onChange,\n      onBlur\n    }) => __jsx(InputNumber, {\n      size: \"lg\",\n      min: 1,\n      value: value,\n      onChange: onChange,\n      onBlur: onBlur\n    })\n  })), __jsx(\"div\", {\n    className: \"product__actions-item product__actions-item--addtocart\"\n  }, __jsx(\"button\", {\n    type: \"submit\",\n    className: classNames('btn', 'btn-primary', 'btn-lg', 'btn-block', {\n      'btn-loading': productForm.submitInProgress\n    })\n  }, __jsx(FormattedMessage, {\n    id: \"BUTTON_ADD_TO_CART\"\n  }))), __jsx(\"div\", {\n    className: \"product__actions-divider\"\n  })), __jsx(AsyncAction, {\n    action: () => wishlistAddItem(product),\n    render: ({\n      run,\n      loading\n    }) => __jsx(\"button\", {\n      type: \"button\",\n      className: classNames('product__actions-item', 'product__actions-item--wishlist', {\n        'product__actions-item--loading': loading\n      }),\n      onClick: run\n    }, __jsx(Wishlist16Svg, null), __jsx(\"span\", null, __jsx(FormattedMessage, {\n      id: \"BUTTON_ADD_TO_WISHLIST\"\n    })))\n  }), __jsx(AsyncAction, {\n    action: () => compareAddItem(product),\n    render: ({\n      run,\n      loading\n    }) => __jsx(\"button\", {\n      type: \"button\",\n      className: classNames('product__actions-item', 'product__actions-item--compare', {\n        'product__actions-item--loading': loading\n      }),\n      onClick: run\n    }, __jsx(Compare16Svg, null), __jsx(\"span\", null, __jsx(FormattedMessage, {\n      id: \"BUTTON_ADD_TO_COMPARE\"\n    })))\n  }));\n\n  const productTagsAndShareLinks = __jsx(\"div\", {\n    className: \"product__tags-and-share-links\"\n  }, product.tags && product.tags.length > 0 && __jsx(\"div\", {\n    className: \"product__tags tags tags--sm\"\n  }, __jsx(\"div\", {\n    className: \"tags__list\"\n  }, product.tags.map((tag, index) => __jsx(AppLink, {\n    href: \"/\",\n    key: index\n  }, tag)))), __jsx(ShareLinks, {\n    className: \"product__share-links\"\n  }));\n\n  const whatsappUrl = new Date().getHours() >= 12 ? 'https://api.whatsapp.com/send?phone=971523195838&text=Hey!I%20would%20like%20to%20know%20more%20about%20some%20parts' : 'https://api.whatsapp.com/send?phone=971523195838&text=Hey!I%20would%20like%20to%20know%20more%20about%20some%20parts';\n  return __jsx(React.Fragment, null, __jsx(PageTitle, null, product.name), __jsx(BlockHeader, {\n    breadcrumb: breadcrumb\n  }), __jsx(\"div\", {\n    className: classNames('block-split', {\n      'block-split--has-sidebar': layout === 'sidebar'\n    })\n  }, __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"div\", {\n    className: \"block-split__row row no-gutters\"\n  }, layout === 'sidebar' && sidebarPosition === 'start' && __jsx(\"div\", {\n    className: \"block-split__item block-split__item-sidebar col-auto\"\n  }, __jsx(ProductSidebar, null)), __jsx(\"div\", {\n    className: \"block-split__item block-split__item-content col-auto\"\n  }, __jsx(\"div\", {\n    className: `product product--layout--${layout}`\n  }, __jsx(\"div\", {\n    className: \"product__body\"\n  }, __jsx(\"div\", {\n    className: \"product__card product__card--one\"\n  }), __jsx(\"div\", {\n    className: \"product__card product__card--two\"\n  }), __jsx(ProductGallery, {\n    images: product.images || [],\n    layout: galleryLayout,\n    className: \"product__gallery\"\n  }), __jsx(\"div\", {\n    className: \"product__header\"\n  }, __jsx(\"h1\", {\n    className: \"product__title\"\n  }, product.name), __jsx(\"div\", {\n    className: \"product__subtitle\"\n  }, __jsx(\"div\", {\n    className: \"product__rating\"\n  }, __jsx(\"div\", {\n    className: \"product__rating-stars\"\n  }, __jsx(Rating, {\n    value: product.rating || 0\n  })), __jsx(\"div\", {\n    className: \"product__rating-label\"\n  }, __jsx(AppLink, {\n    href: {\n      href: {\n        hash: 'product-tab-reviews'\n      }\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"TEXT_RATING_LABEL\",\n    values: {\n      rating: product.rating,\n      reviews: product.reviews\n    }\n  })))), __jsx(CompatibilityStatusBadge, {\n    className: \"product__fit\",\n    product: product\n  }))), layout === 'full' && __jsx(\"div\", {\n    className: \"product__main\"\n  }, product.excerpt && __jsx(\"div\", {\n    className: \"product__excerpt\"\n  }, product.excerpt), featuredAttributes.length > 0 && __jsx(\"div\", {\n    className: \"product__features\"\n  }, __jsx(\"div\", {\n    className: \"product__features-title\"\n  }, __jsx(FormattedMessage, {\n    id: \"TEXT_KEY_FEATURES\"\n  }), \":\"), __jsx(\"ul\", null, featuredAttributes.map((attribute, index) => __jsx(\"li\", {\n    key: index\n  }, attribute.name, ': ', __jsx(\"span\", null, attribute.values.map(value => value.name).join(', '))))), __jsx(\"div\", {\n    className: \"product__features-link\"\n  }, __jsx(AppLink, {\n    href: {\n      href: {\n        hash: 'product-tab-specification'\n      }\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"LINK_SEE_FULL_SPECIFICATION\"\n  }))))), __jsx(\"div\", {\n    className: \"product__info\"\n  }, __jsx(FormProvider, productForm.methods, __jsx(\"form\", {\n    onSubmit: productForm.submit,\n    className: \"product__info-card\"\n  }, productInfoBody, product.options.length > 0 && __jsx(ProductForm, {\n    options: product.options,\n    className: \"product__form\",\n    namespace: \"options\"\n  }), __jsx(\"div\", {\n    className: \"product__info-body\"\n  }, __jsx(\"div\", {\n    className: \"product-form__row\"\n  }, __jsx(\"div\", {\n    className: \"product-form__title\"\n  }, \"Want any Help?\"), __jsx(\"div\", {\n    className: \"product-form__control\"\n  }, __jsx(\"a\", {\n    target: \"_blank\",\n    href: whatsappUrl,\n    className: \"btn btn-success btn-lg btn-block\"\n  }, __jsx(\"i\", {\n    className: \"fab fa-whatsapp\"\n  }), \" WhatsApp Now \")), __jsx(\"div\", {\n    className: \"product-form__control\"\n  }, __jsx(AsyncAction, {\n    action: () => showEnquiry(),\n    render: ({\n      run,\n      loading\n    }) => __jsx(\"button\", {\n      type: \"button\",\n      className: classNames('btn btn-light btn-block', {\n        'product-card__action--loading': loading\n      }),\n      \"aria-label\": intl.formatMessage({\n        id: 'BUTTON_QUICKVIEW'\n      }),\n      onClick: run\n    }, __jsx(\"i\", {\n      className: \"fas fa-envelope-open-text\"\n    }), \" Send Enquiry\")\n  })))), productActions, productTagsAndShareLinks)), shopFeatures), __jsx(ProductTabs, {\n    className: \"product__tabs\",\n    product: product,\n    layout: layout\n  }))), relatedProducts.length > 0 && __jsx(React.Fragment, null, __jsx(BlockSpace, {\n    layout: \"divider-nl\"\n  }), __jsx(BlockProductsCarousel, {\n    blockTitle: intl.formatMessage({\n      id: 'HEADER_RELATED_PRODUCTS'\n    }),\n    products: relatedProducts,\n    layout: layout === 'sidebar' ? 'grid-4-sidebar' : 'grid-5'\n  }))), layout === 'sidebar' && sidebarPosition === 'end' && __jsx(\"div\", {\n    className: \"block-split__item block-split__item-sidebar col-auto\"\n  }, __jsx(ProductSidebar, null))))), __jsx(SendEnquiry, null), __jsx(BlockSpace, {\n    layout: \"before-footer\"\n  }));\n}\n\nexport default ShopPageProduct;","map":null,"metadata":{},"sourceType":"module"}