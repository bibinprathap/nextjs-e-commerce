{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\n// react\nimport React, { useEffect, useState } from 'react'; // third-party\n\nimport { FormattedMessage } from 'react-intl'; // application\n\nimport Checkbox from '~/components/shared/Checkbox';\nimport VehiclePickerModal from '~/components/shared/VehiclePickerModal';\nimport { useCurrentVehicle } from '~/services/current-vehicle';\n\nfunction FilterVehicle(props) {\n  var options = props.options,\n      value = props.value,\n      onChangeValue = props.onChangeValue;\n\n  var _useCurrentVehicle = useCurrentVehicle(),\n      _useCurrentVehicle2 = _slicedToArray(_useCurrentVehicle, 2),\n      currentVehicle = _useCurrentVehicle2[0],\n      setCurrentVehicle = _useCurrentVehicle2[1];\n\n  var _useState = useState(false),\n      vehiclePickerIsOpen = _useState[0],\n      setVehiclePickerIsOpen = _useState[1];\n\n  var _useState2 = useState(options.vehicle),\n      initialVehicle = _useState2[0];\n\n  var updateValue = function updateValue(newValue) {\n    if (onChangeValue) {\n      onChangeValue({\n        filter: options,\n        value: newValue\n      });\n    }\n  };\n\n  var handleChange = function handleChange(event) {\n    if (event.target.checked && currentVehicle) {\n      updateValue(currentVehicle.id);\n    } else {\n      updateValue(null);\n    }\n  };\n\n  var showVehiclePicker = function showVehiclePicker() {\n    setVehiclePickerIsOpen(true);\n  };\n\n  var onVehiclePickerClose = function onVehiclePickerClose() {\n    setVehiclePickerIsOpen(false);\n  };\n\n  var onVehiclePickerSelect = function onVehiclePickerSelect(selectedVehicle) {\n    setCurrentVehicle(selectedVehicle || null);\n\n    if (value !== null) {\n      updateValue((selectedVehicle === null || selectedVehicle === void 0 ? void 0 : selectedVehicle.id) || null);\n    }\n  };\n\n  useEffect(function () {\n    if (initialVehicle === null) {\n      return;\n    }\n\n    setTimeout(function () {\n      setCurrentVehicle(initialVehicle || null);\n    }, 0);\n  }, [setCurrentVehicle, initialVehicle]);\n  return __jsx(\"div\", {\n    className: \"filter-vehicle\"\n  }, __jsx(VehiclePickerModal, {\n    value: currentVehicle,\n    isOpen: vehiclePickerIsOpen,\n    onClose: onVehiclePickerClose,\n    onSelect: onVehiclePickerSelect\n  }), currentVehicle !== null && __jsx(\"ul\", {\n    className: \"filter-vehicle__list\"\n  }, __jsx(\"li\", {\n    className: \"filter-vehicle__item\"\n  }, __jsx(\"label\", {\n    className: \"filter-vehicle__item-label\"\n  }, __jsx(Checkbox, {\n    className: \"filter-list__input\",\n    checked: value !== null,\n    onChange: handleChange\n  }), __jsx(\"span\", {\n    className: \"filter-vehicle__item-title\"\n  }, __jsx(FormattedMessage, {\n    id: \"INPUT_ONLY_EXACT_FIT_PARTS_LABEL\"\n  })))), __jsx(\"li\", {\n    className: \"filter-vehicle__vehicle\"\n  }, __jsx(\"div\", {\n    className: \"filter-vehicle__vehicle-title\"\n  }, \"\".concat(currentVehicle.year, \" \").concat(currentVehicle.make, \" \").concat(currentVehicle.model)), __jsx(\"div\", {\n    className: \"filter-vehicle__vehicle-subtitle\"\n  }, currentVehicle.engine))), currentVehicle === null && __jsx(\"div\", {\n    className: \"filter-vehicle__empty\"\n  }, __jsx(FormattedMessage, {\n    id: \"TEXT_VEHICLE_FILTER_HELP\"\n  })), __jsx(\"div\", {\n    className: \"filter-vehicle__button\"\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"btn btn-xs btn-secondary\",\n    onClick: showVehiclePicker\n  }, __jsx(FormattedMessage, {\n    id: \"BUTTON_SELECT_VEHICLE\"\n  }))));\n}\n\nexport default FilterVehicle;","map":null,"metadata":{},"sourceType":"module"}