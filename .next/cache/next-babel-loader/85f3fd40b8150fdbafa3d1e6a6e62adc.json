{"ast":null,"code":"import { getClient } from '~/api/fake-api/redis';\nimport { shopApi } from '~/api';\nexport default (async (_, res) => {\n  const params = _.query;\n  console.log(\"RECEIVED\", _.query); // logs as undefined\n\n  const {\n    text\n  } = _.query;\n  const slug = typeof (params === null || params === void 0 ? void 0 : params.slug) === 'string' ? params === null || params === void 0 ? void 0 : params.slug.replace(\" \", \"+\") : \"\";\n  const redis = await getClient();\n  const toDosCache = await redis.get(slug);\n\n  if (slug && toDosCache !== null) {\n    const pres = JSON.parse(toDosCache);\n    console.log(pres);\n    res.status(200).json({\n      product: pres\n    });\n  } else {\n    const p = await shopApi.getProductBySlug(slug);\n    if (p.slug) redis.set(slug, JSON.stringify(p));\n    res.status(200).json({\n      productDetails: slug ? p : null\n    });\n  }\n});","map":null,"metadata":{},"sourceType":"module"}