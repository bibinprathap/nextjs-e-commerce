{"ast":null,"code":"// application\nimport { shopApi } from '~/api';\nimport { QUICKVIEW_CLOSE, QUICKVIEW_OPEN } from '~/store/quickview/quickviewActionTypes';\n\nvar cancelPreviousRequest = function cancelPreviousRequest() {};\n\nexport function quickviewOpenSuccess(product) {\n  return {\n    type: QUICKVIEW_OPEN,\n    product: product\n  };\n}\nexport function quickviewClose() {\n  return {\n    type: QUICKVIEW_CLOSE\n  };\n}\nexport function quickviewOpen(productSlug) {\n  return function (dispatch) {\n    cancelPreviousRequest();\n    return new Promise(function (resolve) {\n      var canceled = false; // sending request to server, timeout is used as a stub\n\n      var timer = setTimeout(function () {\n        shopApi.getProductBySlug(productSlug).then(function (product) {\n          if (canceled) {\n            return;\n          }\n\n          if (product) {\n            dispatch(quickviewOpenSuccess(product));\n          }\n\n          resolve();\n        });\n      }, 250);\n\n      cancelPreviousRequest = function cancelPreviousRequest() {\n        canceled = true;\n        clearTimeout(timer);\n        resolve();\n      };\n    });\n  };\n}","map":null,"metadata":{},"sourceType":"module"}